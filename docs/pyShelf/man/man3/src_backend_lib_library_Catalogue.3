.TH "src.backend.lib.library.Catalogue" 3 "Sat Mar 18 2023" "Version 0.8.0" "pyShelf Open Source Ebook Server" \" -*- nroff -*-
.ad l
.nh
.SH NAME
src.backend.lib.library.Catalogue
.SH SYNOPSIS
.br
.PP
.PP
Inherited by \fBsrc\&.backend\&.lib\&.overide\&.ACatalogue\fP, and \fBsrc\&.backend\&.tests\&.library_test\&.Test_Catalogue\fP\&.
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "def \fB__init__\fP (self, config)"
.br
.ti -1c
.RI "def \fBscan_folder\fP (self, _path=None)"
.br
.ti -1c
.RI "def \fBfilter_books\fP (self)"
.br
.ti -1c
.RI "def \fBprocess_by_filetype\fP (self, book)"
.br
.ti -1c
.RI "def \fBextract_metadata_epub\fP (self, book)"
.br
.ti -1c
.RI "def \fBextract_metadata_pdf\fP (self, book)"
.br
.ti -1c
.RI "def \fBextract_metadata_mobi\fP (self, book)"
.br
.ti -1c
.RI "def \fBextract_content\fP (self, book_zip, book)"
.br
.ti -1c
.RI "def \fBextract_cover_html\fP (self, book_zip, book)"
.br
.ti -1c
.RI "def \fBextract_cover_image\fP (self, book_zip, book)"
.br
.ti -1c
.RI "def \fBcompare_shelf_current\fP (self)"
.br
.ti -1c
.RI "def \fBimport_books\fP (self, list=None, **kwargs)"
.br
.in -1c
.SS "Static Public Member Functions"

.in +1c
.ti -1c
.RI "def \fBprocess_epub\fP (book)"
.br
.ti -1c
.RI "def \fBstripTags\fP (source)"
.br
.in -1c
.SS "Public Attributes"

.in +1c
.ti -1c
.RI "\fBfile_list\fP"
.br
.ti -1c
.RI "\fBopf_regx\fP"
.br
.ti -1c
.RI "\fBcover_regx\fP"
.br
.ti -1c
.RI "\fBhtml_regx\fP"
.br
.ti -1c
.RI "\fBtitle_sanitization_regx\fP"
.br
.ti -1c
.RI "\fBtitle_sanitization_lvl2_regx\fP"
.br
.ti -1c
.RI "\fBtitle_sanitization_dirs_regx\fP"
.br
.ti -1c
.RI "\fBroot_dir\fP"
.br
.ti -1c
.RI "\fBbook_folder\fP"
.br
.ti -1c
.RI "\fBbooks\fP"
.br
.ti -1c
.RI "\fBdb_pointer\fP"
.br
.ti -1c
.RI "\fBconfig\fP"
.br
.in -1c
.SH "Detailed Description"
.PP

.PP
.nf
Decodes book metadata for storage

.fi
.PP

.SH "Constructor & Destructor Documentation"
.PP
.SS "def src\&.backend\&.lib\&.library\&.Catalogue\&.__init__ ( self,  config)"

.SH "Member Function Documentation"
.PP
.SS "def src\&.backend\&.lib\&.library\&.Catalogue\&.compare_shelf_current ( self)"

.PP
.nf
Calls storage system, gets list of books stored and compares against files on disk

.fi
.PP

.SS "def src\&.backend\&.lib\&.library\&.Catalogue\&.extract_content ( self,  book_zip,  book)"

.PP
.nf
Opens epub as zip file filters then stores as list any files matching opf_regx

.fi
.PP

.SS "def src\&.backend\&.lib\&.library\&.Catalogue\&.extract_cover_html ( self,  book_zip,  book)"

.PP
.nf
Opens epub as zip file filters then stores as list any files matching html_regx

.fi
.PP

.SS "def src\&.backend\&.lib\&.library\&.Catalogue\&.extract_cover_image ( self,  book_zip,  book)"

.PP
.nf
Opens epub as zip file filters then stores as list any files matching cover_regx

.fi
.PP

.SS "def src\&.backend\&.lib\&.library\&.Catalogue\&.extract_metadata_epub ( self,  book)"

.PP
.nf
Return extracted metadata and cover picture
book['path'] == Full path to ebook file
book['files'] == list of files from self\&.process_book(book)

.fi
.PP

.SS "def src\&.backend\&.lib\&.library\&.Catalogue\&.extract_metadata_mobi ( self,  book)"

.SS "def src\&.backend\&.lib\&.library\&.Catalogue\&.extract_metadata_pdf ( self,  book)"

.PP
.nf
Return extracted metadata
:NOTES: Retrieval of data has been problematic, some pdf's providing
reliable titles that corespond with the actual, and others being
nonsense\&.

.fi
.PP

.SS "def src\&.backend\&.lib\&.library\&.Catalogue\&.filter_books ( self)"

.PP
.nf
Calls scan_folder and filters out book files\&.

:returns self\&._book_list_expanded: json string containing
all book metadata

.fi
.PP

.PP
Reimplemented in \fBsrc\&.backend\&.tests\&.library_test\&.Test_Catalogue\fP\&.
.SS "def src\&.backend\&.lib\&.library\&.Catalogue\&.import_books ( self,  list = \fCNone\fP, ** kwargs)"

.PP
.nf
Main entry point for import operations\&.
Gets a list of new files via compare_shelf_current\&.
Iterates over list and inserts new books into database\&.

.fi
.PP

.PP
Reimplemented in \fBsrc\&.backend\&.lib\&.overide\&.ACatalogue\fP\&.
.SS "def src\&.backend\&.lib\&.library\&.Catalogue\&.process_by_filetype ( self,  book)"

.PP
.nf
Determine books filetype and process\&.
.fi
.PP

.SS "def src\&.backend\&.lib\&.library\&.Catalogue\&.process_epub ( book)\fC [static]\fP"

.PP
.nf
Return dictionary of epub file contents
.fi
.PP

.SS "def src\&.backend\&.lib\&.library\&.Catalogue\&.scan_folder ( self,  _path = \fCNone\fP)"

.PP
.nf
Scan folder by _path, allows recurisive scanning

.fi
.PP

.PP
Reimplemented in \fBsrc\&.backend\&.lib\&.overide\&.ACatalogue\fP\&.
.SS "def src\&.backend\&.lib\&.library\&.Catalogue\&.stripTags ( source)\fC [static]\fP"

.SH "Member Data Documentation"
.PP
.SS "src\&.backend\&.lib\&.library\&.Catalogue\&.book_folder"

.SS "src\&.backend\&.lib\&.library\&.Catalogue\&.books"

.SS "src\&.backend\&.lib\&.library\&.Catalogue\&.config"

.SS "src\&.backend\&.lib\&.library\&.Catalogue\&.cover_regx"

.SS "src\&.backend\&.lib\&.library\&.Catalogue\&.db_pointer"

.SS "src\&.backend\&.lib\&.library\&.Catalogue\&.file_list"

.SS "src\&.backend\&.lib\&.library\&.Catalogue\&.html_regx"

.SS "src\&.backend\&.lib\&.library\&.Catalogue\&.opf_regx"

.SS "src\&.backend\&.lib\&.library\&.Catalogue\&.root_dir"

.SS "src\&.backend\&.lib\&.library\&.Catalogue\&.title_sanitization_dirs_regx"

.SS "src\&.backend\&.lib\&.library\&.Catalogue\&.title_sanitization_lvl2_regx"

.SS "src\&.backend\&.lib\&.library\&.Catalogue\&.title_sanitization_regx"


.SH "Author"
.PP
Generated automatically by Doxygen for pyShelf Open Source Ebook Server from the source code\&.
